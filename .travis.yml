language: node_js
node_js:
    - lts/*
script:
    - yarn test
    - yarn build
deploy:
    - provider: script
      skip_cleanup: true
      script:
          - npx @dhis2/cli-utils release --publish npm
      on:
          tags: false
          branch: master
env:
    global:
        - GIT_AUTHOR_NAME=@dhis2-bot
        - GIT_AUTHOR_EMAIL=apps@dhis2.org
        - GIT_COMMITTER_NAME=@dhis2-bot
        - GIT_COMMITTER_EMAIL=apps@dhis2.org
        - secure: DGSs+jM4aFXERu+0DJ6SIoDdTbk9yx//XjqenyUZJJtroFNIzwKcx/a3AfZJl7qJ6tyUyBAQeMYX8WG5flCkVY6azIZcvQqu1MR8hNI5XhOQuiBIkbv1m/gGKnbh6CwnsXDbtKvZUfT52gIY2bcSZTB5Hu5jAdAHQvBTKee0L8x756G4QSh4twPg6uBca8FDslIDqCN3P3+2Wg5pggo68hqig4k9v17PxPiP9ILBIt2HafrKWhGE3G9L1IgdMLIvr4XE5jReigzpxi0tZ5w3xvzug5v9P0PEDxqf2h+JSnuxpUbNMR1fBPDYe13jq/fhhD8KdiI2mPfiEJQsTnwXftaFRFsel67YM4VPr4E3+Ad07EKX+e7nHlBWUsymv1808LKjmsBl0TJe16Ncdiz9zOsfE4JODFHTyk8Ezme7ZZ1SJNcaT5zr+YIy+EjzgvF9DHcnStG+ia/YCDsMHo+28fvCPtvDfpPHQ/PKrA2qWAE3TlJuIKZlTB0682voh6hstHL5jafQYyrjpjKDl4pgZXNftVDm+WLCEpqc2qsRU6BVZTdt+yniVWr4YEPzxqCWDDnJC8CDRn/Gntc5PGH8T479J7zkIu96+/qPaOBLNL8WD5mgilqDKAPNqOO2b+aRXmv0tuCL8xEjelqTvGAi1qsbEnUuAqIiLVQg75AwJXs=
        - secure: NNIhsfvNGs1maX6KkS2wBbjvgIlIb2nd7eO8TY8JtkEu76+SysNZatlsBJwWDNVqakAo5Nk1Jo6IIRtH+fHCIeyIiYYRiYtaQ/FdJkqBAxbaTjbnDsXHZ1ZJVavMajtDOyAOQhFnQ7xCgRjzNJMTYVj48NQwyuXGbGlybGqjSFYRC9gYpuRzYU+z+QQStGRmRlw2W1vTQbz6FLfcTFuyxOYEO2KhQ3Oi0MkV5TrdAWdqyJyNPrFYlwQosVec2fxOofh+zmYOXIEgvOl8JvwP4FJ5qBs5+7zBprq4B4F+sFpMxqw7lej6Gux0HCfVJmPl/DBia+eCNQnvxOkcRsSN/T+KcBFpmabrmN8Yz1xSOWelxRwzfPMm4Mqo+wvXqFupW1TrsA/MHqnaF/RrJLfZcEfYqLNfmuvQZ3U1rng3G1m7zujDWPMpwNVSQ+fN74GVqRlVQMF4jmoSpswcZ2W0UeAheiBtNblmb3vdaK6sKMuSLf2L/BcVSNz70CrFoER0VHSmgweLoh4AyEuKJjcMSTTqyyKfpJT2MSu8qeTI8Q0YJHqOp4UiND+7dbo/83uTK/tt7j1FEEZsMjVFJASI7MUKu0tlimB83pwwCBQR+TuR1pRzLbqP+BltAb3hKQ7Z/Uja1YbitG/UdnwDuzF15+YKDVPhGikC0bxpwEyjfOA=
